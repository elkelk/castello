
var Tile,TileTypes,constants;(function(){})();constants={features:{field:1,road:2,city:3,cloister:4,stop:5}};Tile=Backbone.Model.extend({defaults:{features:TileTypes.starter,position_x:0,position_y:0,placed:false},initialize:function(){},place:function(x,y){return this.set({position_x:x,position_y:y});},place_player:function(color,feature_index){return this.set({player_on:feature_index,player_color:color});},feature_end:function(feature_index){var feature,feature_end,side,that;that=this;feature_end=true;feature=this.get("features")[feature_index];side=this.feature_side(feature_index);if(feature===Constants.features.city){if(side==="north"){_.each(_.union(Tile.east(),Tile.west()),function(test_index){if(feature===that.get("features")[test_index]){return feature_end=false;}});}}
return feature_end;},feature_side:function(feature_index){var side;side="center";side=(_.include(Tile.north(),feature_index)?"north":side);side=(_.include(Tile.east(),feature_index)?"east":side);side=(_.include(Tile.west(),feature_index)?"south":side);side=(_.include(Tile.south(),feature_index)?"west":side);return side;}});Tile.north=function(){return[0,1,2];};Tile.east=function(){return[3,4,5];};Tile.south=function(){return[6,7,8];};Tile.west=function(){return[9,10,11];};Tile.center=function(){return[12];};TileTypes={};TileTypes.get=function(features){return _.map(features,function(feature){return Constants.features[feature];});};TileTypes.starter=TileTypes.get(["stop","city","stop","road","field","field","field","road","road"]);TileTypes.diagonal_city=TileTypes.get(["stop","city","city","city","stop","field","field","field","stop"]);TileTypes.straight_city=TileTypes.get(["stop","city","stop","field","stop","city","stop","field","city"]);TileTypes.half_city=TileTypes.get(["stop","city","stop","field","field","field","field","field","field"]);TileTypes.double_half_city=TileTypes.get(["stop","city","stop","field","stop","city","stop","field","field"]);TileTypes.three_sided_city=TileTypes.get(["city","city","city","city","stop","field","stop","city","city"]);TileTypes.elbow_road=TileTypes.get(["field","road","field","road","field","field","field","field","road"]);TileTypes.straight_road=TileTypes.get(["field","road","field","field","field","road","field","field","road"]);TileTypes.t_road=TileTypes.get(["field","road","field","road","field","road","field","field","stop"]);